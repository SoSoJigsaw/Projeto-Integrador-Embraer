CREATE TABLE "ADMIN"."USER_ITEM" 
   (	"USER_ID" NUMBER, 
	"ITEM_ID" NUMBER, 
	"USER_ITEM_ID" NUMBER
   )  DEFAULT COLLATION "USING_NLS_COMP" ;

CREATE UNIQUE INDEX "ADMIN"."PK_USER_ITEM_ID" ON "ADMIN"."USER_ITEM" ("USER_ITEM_ID") 
  ;

ALTER TABLE "ADMIN"."USER_ITEM" MODIFY ("USER_ID" NOT NULL ENABLE);

ALTER TABLE "ADMIN"."USER_ITEM" MODIFY ("ITEM_ID" NOT NULL ENABLE);

ALTER TABLE "ADMIN"."USER_ITEM" MODIFY ("USER_ITEM_ID" NOT NULL ENABLE);

ALTER TABLE "ADMIN"."USER_ITEM" ADD CONSTRAINT "PK_USER_ITEM_ID" PRIMARY KEY ("USER_ITEM_ID")
  USING INDEX  ENABLE;

ALTER TABLE "ADMIN"."USER_ITEM" ADD CONSTRAINT "FK_USER_ID_ITEM" FOREIGN KEY ("USER_ID")
	  REFERENCES "ADMIN"."USERS" ("USER_ID") ENABLE;

ALTER TABLE "ADMIN"."USER_ITEM" ADD CONSTRAINT "FK_ITEM_ID_USER" FOREIGN KEY ("ITEM_ID")
	  REFERENCES "ADMIN"."ITEMS" ("ITEM_ID") ENABLE;

CREATE OR REPLACE EDITIONABLE TRIGGER "ADMIN"."TRG_SEQ_USER_ITEM_ID" 
BEFORE INSERT ON USER_ITEM
FOR EACH ROW
BEGIN
  SELECT USER_ITEM_ID_SEQ.NEXTVAL
  INTO :new.USER_ITEM_ID
  FROM dual;
END;
/
ALTER TRIGGER "ADMIN"."TRG_SEQ_USER_ITEM_ID" ENABLE;

